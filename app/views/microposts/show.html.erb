<div class="row">
	<div class="col s6 offset-s3">
		<div class="card hoverable">
			<div class="row">
				<div class="col s2">
					<% if @micropost.user.picture? %>
					<%= image_tag @micropost.user.picture.url ,:style =>'width:100%'%>
					<% else %>
					<%= image_tag 'default-image.png' %>
					<% end %>
				</div>
				<div class="col s7">
					<div class="row">
						<div class="s12">
							<%= link_to @micropost.user.first_name, @micropost.user %> 
						</div>
					</div>
					<div class="row">
						<div class="s12">
							<%= time_ago_in_words(@micropost.created_at) %> ago.
						</div>
					</div>
				</div>
				<div class="col s2">
					<% if current_user?(@micropost.user) %>
					<%= link_to "edit", edit_micropost_path(@micropost) %>
					<%= link_to "delete", @micropost, method: :delete,
					data: { confirm: "You sure?" } %>
					<% end %>
				</div>
			</div>
			<div class="card-content">
				<%= @micropost.content %>
			</div>
			<div class="card-image">
				<%= image_tag @micropost.picture.url if @micropost.picture? %>
			</div>
			<div class="card-action">
				<%= display_likes @micropost %>
			</div>
			<div class="card-action">
				<% if logged_in? %>
				<% if current_user.liked? @micropost %>
				<%= link_to "<i class='material-icons sentiment_very_satisfied'>sentiment_very_satisfied</i>".html_safe, dislike_micropost_path(@micropost), class: 'vote', method: :put, remote: true, data: { toggle_text: "<i class='material-icons sentiment_neutral'>sentiment_neutral</i>".html_safe, toggle_href: like_micropost_path(@micropost), id: @micropost.id } %>
				<% else %>
				<%= link_to "<i class='material-icons sentiment_neutral'>sentiment_neutral</i>".html_safe, like_micropost_path(@micropost), class: 'vote', method: :put, remote: true, data: { toggle_text: "<i class='material-icons sentiment_very_satisfied'>sentiment_very_satisfied</i>".html_safe, toggle_href: dislike_micropost_path(@micropost), id: @micropost.id } %>
				<% end %>
				<span> Â· </span>
				<% end %>

				<span class="votes-count" data-id="<%= @micropost.id %>">
					<%= @micropost.get_likes.size %>
				</span>	 users like this
			</div>
			<div class="comments" id="comments_<%= @micropost.id %>">
				<% if @micropost.comments %>
				<%= render @micropost.comments, micropost: @micropost %>
				<% end %>
			</div>
			<div class="card-action">
				<div class="comment-form row">
					<%= form_for [@micropost, @micropost.comments.build] , remote:true do |f| %>
					<% if current_user.picture? %>
					<div class="col s2">
					<%= image_tag current_user.picture.url ,:style =>'width:100%'%>
					<% else %>
					<%= image_tag 'default-image.png' %>
					<% end %>
					</div>
					<div class="col s8">
					<%= f.text_field :content, placeholder: 'Add a comment...', class: "comment_content", id: "comment_content_#{@micropost.id}" %>
					<% end %>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
